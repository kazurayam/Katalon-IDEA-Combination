def runAdoc2md() {
    def processBuilder = new ProcessBuilder('./adoc2md.sh', '-t', './index_.adoc')
    def output = File.createTempFile("runAdoc2md","")
    processBuilder.redirectOutput(output)
    def process = processBuilder.start()
    process.waitFor()
    return output.text
}

tasks.register("generateDocs") {
    group = 'Custom'
    doFirst {
        delete 'index.md'
    }
    doLast {
        runAdoc2md()
    }
}